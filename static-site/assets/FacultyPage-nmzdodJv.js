import{e as to,V as oo,Y as Je,r as n,O as H,j as e,H as _,X as A,Q as B,T as Ze,S as no,_ as so,a9 as ro,N as et,W as Be,a1 as ao,E as F,a6 as tt,a3 as io,w as lo,x as co,m as He,aa as Pe,ab as Ee,L as Re,n as uo,o as po,p as mo,q as ho,s as fo,g as xo,z as V,v as Ue}from"./index-C-yBDewJ.js";import{c as ot,a as go,h as vo,u as So,R as wo,F as jo,C as yo,b as Le,d as Co,e as bo,f as No,A as To}from"./AdminLayout-DVxqQUWq.js";import{B as me}from"./smalllogo1-Dqd9b7yB.js";import{D as Ke,a as Io,b as We,c as qe,d as $e,e as ze,f as Ge,T as Po,g as Eo,h as Ro,i as Ae,j as ce,k as Ao,l as ae,A as _o,m as Do,n as Mo,o as Oo,p as Fo,q as Lo,r as ko,s as Vo,t as Bo,u as Ho}from"./alert-dialog-BUU8p5Re.js";import{F as Qe,a as Y,b as X,c as J,d as Z,I as de,e as ee,f as Uo}from"./input-BAAG4IVG.js";import{u as Ko,P as Wo,T as qo}from"./index-DOZCFxMW.js";import{U as $o}from"./user-plus-CRKIf_sl.js";import"./calendar-DWCOf2qh.js";import"./file-text-DVVDHAI9.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=to("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function Ye(o,[s,t]){return Math.min(t,Math.max(s,o))}var Go=[" ","Enter","ArrowUp","ArrowDown"],Qo=[" ","Enter"],fe="Select",[Se,we,Yo]=oo(fe),[ue,kn]=Je(fe,[Yo,ot]),je=ot(),[Xo,te]=ue(fe),[Jo,Zo]=ue(fe),nt=o=>{const{__scopeSelect:s,children:t,open:a,defaultOpen:i,onOpenChange:u,value:l,defaultValue:r,onValueChange:c,dir:p,name:g,autoComplete:w,disabled:T,required:E,form:I}=o,m=je(s),[v,j]=n.useState(null),[h,f]=n.useState(null),[d,b]=n.useState(!1),S=bo(p),[R=!1,L]=Be({prop:a,defaultProp:i,onChange:u}),[z,ne]=Be({prop:l,defaultProp:r,onChange:c}),U=n.useRef(null),K=v?I||!!v.closest("form"):!0,[G,W]=n.useState(new Set),q=Array.from(G).map(D=>D.props.value).join(";");return e.jsx(No,{...m,children:e.jsxs(Xo,{required:E,scope:s,trigger:v,onTriggerChange:j,valueNode:h,onValueNodeChange:f,valueNodeHasChildren:d,onValueNodeHasChildrenChange:b,contentId:Le(),value:z,onValueChange:ne,open:R,onOpenChange:L,dir:S,triggerPointerDownPosRef:U,disabled:T,children:[e.jsx(Se.Provider,{scope:s,children:e.jsx(Jo,{scope:o.__scopeSelect,onNativeOptionAdd:n.useCallback(D=>{W(k=>new Set(k).add(D))},[]),onNativeOptionRemove:n.useCallback(D=>{W(k=>{const $=new Set(k);return $.delete(D),$})},[]),children:t})}),K?e.jsxs(Pt,{"aria-hidden":!0,required:E,tabIndex:-1,name:g,autoComplete:w,value:z,onChange:D=>ne(D.target.value),disabled:T,form:I,children:[z===void 0?e.jsx("option",{value:""}):null,Array.from(G)]},q):null]})})};nt.displayName=fe;var st="SelectTrigger",rt=n.forwardRef((o,s)=>{const{__scopeSelect:t,disabled:a=!1,...i}=o,u=je(t),l=te(st,t),r=l.disabled||a,c=H(s,l.onTriggerChange),p=we(t),g=n.useRef("touch"),[w,T,E]=Et(m=>{const v=p().filter(f=>!f.disabled),j=v.find(f=>f.value===l.value),h=Rt(v,m,j);h!==void 0&&l.onValueChange(h.value)}),I=m=>{r||(l.onOpenChange(!0),E()),m&&(l.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return e.jsx(go,{asChild:!0,...u,children:e.jsx(_.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:r,"data-disabled":r?"":void 0,"data-placeholder":It(l.value)?"":void 0,...i,ref:c,onClick:A(i.onClick,m=>{m.currentTarget.focus(),g.current!=="mouse"&&I(m)}),onPointerDown:A(i.onPointerDown,m=>{g.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(I(m),m.preventDefault())}),onKeyDown:A(i.onKeyDown,m=>{const v=w.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&T(m.key),!(v&&m.key===" ")&&Go.includes(m.key)&&(I(),m.preventDefault())})})})});rt.displayName=st;var at="SelectValue",it=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:a,style:i,children:u,placeholder:l="",...r}=o,c=te(at,t),{onValueNodeHasChildrenChange:p}=c,g=u!==void 0,w=H(s,c.onValueNodeChange);return B(()=>{p(g)},[p,g]),e.jsx(_.span,{...r,ref:w,style:{pointerEvents:"none"},children:It(c.value)?e.jsx(e.Fragment,{children:l}):u})});it.displayName=at;var en="SelectIcon",lt=n.forwardRef((o,s)=>{const{__scopeSelect:t,children:a,...i}=o;return e.jsx(_.span,{"aria-hidden":!0,...i,ref:s,children:a||"â–¼"})});lt.displayName=en;var tn="SelectPortal",ct=o=>e.jsx(ao,{asChild:!0,...o});ct.displayName=tn;var ie="SelectContent",dt=n.forwardRef((o,s)=>{const t=te(ie,o.__scopeSelect),[a,i]=n.useState();if(B(()=>{i(new DocumentFragment)},[]),!t.open){const u=a;return u?Ze.createPortal(e.jsx(ut,{scope:o.__scopeSelect,children:e.jsx(Se.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),u):null}return e.jsx(pt,{...o,ref:s})});dt.displayName=ie;var O=10,[ut,oe]=ue(ie),on="SelectContentImpl",pt=n.forwardRef((o,s)=>{const{__scopeSelect:t,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:u,onPointerDownOutside:l,side:r,sideOffset:c,align:p,alignOffset:g,arrowPadding:w,collisionBoundary:T,collisionPadding:E,sticky:I,hideWhenDetached:m,avoidCollisions:v,...j}=o,h=te(ie,t),[f,d]=n.useState(null),[b,S]=n.useState(null),R=H(s,x=>d(x)),[L,z]=n.useState(null),[ne,U]=n.useState(null),K=we(t),[G,W]=n.useState(!1),q=n.useRef(!1);n.useEffect(()=>{if(f)return vo(f)},[f]),So();const D=n.useCallback(x=>{const[P,...M]=K().map(C=>C.ref.current),[N]=M.slice(-1),y=document.activeElement;for(const C of x)if(C===y||(C==null||C.scrollIntoView({block:"nearest"}),C===P&&b&&(b.scrollTop=0),C===N&&b&&(b.scrollTop=b.scrollHeight),C==null||C.focus(),document.activeElement!==y))return},[K,b]),k=n.useCallback(()=>D([L,f]),[D,L,f]);n.useEffect(()=>{G&&k()},[G,k]);const{onOpenChange:$,triggerPointerDownPosRef:Q}=h;n.useEffect(()=>{if(f){let x={x:0,y:0};const P=N=>{var y,C;x={x:Math.abs(Math.round(N.pageX)-(((y=Q.current)==null?void 0:y.x)??0)),y:Math.abs(Math.round(N.pageY)-(((C=Q.current)==null?void 0:C.y)??0))}},M=N=>{x.x<=10&&x.y<=10?N.preventDefault():f.contains(N.target)||$(!1),document.removeEventListener("pointermove",P),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",M,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",M,{capture:!0})}}},[f,$,Q]),n.useEffect(()=>{const x=()=>$(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[$]);const[ye,xe]=Et(x=>{const P=K().filter(y=>!y.disabled),M=P.find(y=>y.ref.current===document.activeElement),N=Rt(P,x,M);N&&setTimeout(()=>N.ref.current.focus())}),Ce=n.useCallback((x,P,M)=>{const N=!q.current&&!M;(h.value!==void 0&&h.value===P||N)&&(z(x),N&&(q.current=!0))},[h.value]),be=n.useCallback(()=>f==null?void 0:f.focus(),[f]),le=n.useCallback((x,P,M)=>{const N=!q.current&&!M;(h.value!==void 0&&h.value===P||N)&&U(x)},[h.value]),ge=a==="popper"?_e:mt,pe=ge===_e?{side:r,sideOffset:c,align:p,alignOffset:g,arrowPadding:w,collisionBoundary:T,collisionPadding:E,sticky:I,hideWhenDetached:m,avoidCollisions:v}:{};return e.jsx(ut,{scope:t,content:f,viewport:b,onViewportChange:S,itemRefCallback:Ce,selectedItem:L,onItemLeave:be,itemTextRefCallback:le,focusSelectedItem:k,selectedItemText:ne,position:a,isPositioned:G,searchRef:ye,children:e.jsx(wo,{as:no,allowPinchZoom:!0,children:e.jsx(jo,{asChild:!0,trapped:h.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:A(i,x=>{var P;(P=h.trigger)==null||P.focus({preventScroll:!0}),x.preventDefault()}),children:e.jsx(so,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(ge,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:x=>x.preventDefault(),...j,...pe,onPlaced:()=>W(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:A(j.onKeyDown,x=>{const P=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!P&&x.key.length===1&&xe(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let N=K().filter(y=>!y.disabled).map(y=>y.ref.current);if(["ArrowUp","End"].includes(x.key)&&(N=N.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const y=x.target,C=N.indexOf(y);N=N.slice(C+1)}setTimeout(()=>D(N)),x.preventDefault()}})})})})})})});pt.displayName=on;var nn="SelectItemAlignedPosition",mt=n.forwardRef((o,s)=>{const{__scopeSelect:t,onPlaced:a,...i}=o,u=te(ie,t),l=oe(ie,t),[r,c]=n.useState(null),[p,g]=n.useState(null),w=H(s,R=>g(R)),T=we(t),E=n.useRef(!1),I=n.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:j,focusSelectedItem:h}=l,f=n.useCallback(()=>{if(u.trigger&&u.valueNode&&r&&p&&m&&v&&j){const R=u.trigger.getBoundingClientRect(),L=p.getBoundingClientRect(),z=u.valueNode.getBoundingClientRect(),ne=j.getBoundingClientRect();if(u.dir!=="rtl"){const y=ne.left-L.left,C=z.left-y,se=R.left-C,re=R.width+se,Ne=Math.max(re,L.width),Te=window.innerWidth-O,Ie=Ye(C,[O,Math.max(O,Te-Ne)]);r.style.minWidth=re+"px",r.style.left=Ie+"px"}else{const y=L.right-ne.right,C=window.innerWidth-z.right-y,se=window.innerWidth-R.right-C,re=R.width+se,Ne=Math.max(re,L.width),Te=window.innerWidth-O,Ie=Ye(C,[O,Math.max(O,Te-Ne)]);r.style.minWidth=re+"px",r.style.right=Ie+"px"}const U=T(),K=window.innerHeight-O*2,G=m.scrollHeight,W=window.getComputedStyle(p),q=parseInt(W.borderTopWidth,10),D=parseInt(W.paddingTop,10),k=parseInt(W.borderBottomWidth,10),$=parseInt(W.paddingBottom,10),Q=q+D+G+$+k,ye=Math.min(v.offsetHeight*5,Q),xe=window.getComputedStyle(m),Ce=parseInt(xe.paddingTop,10),be=parseInt(xe.paddingBottom,10),le=R.top+R.height/2-O,ge=K-le,pe=v.offsetHeight/2,x=v.offsetTop+pe,P=q+D+x,M=Q-P;if(P<=le){const y=U.length>0&&v===U[U.length-1].ref.current;r.style.bottom="0px";const C=p.clientHeight-m.offsetTop-m.offsetHeight,se=Math.max(ge,pe+(y?be:0)+C+k),re=P+se;r.style.height=re+"px"}else{const y=U.length>0&&v===U[0].ref.current;r.style.top="0px";const se=Math.max(le,q+m.offsetTop+(y?Ce:0)+pe)+M;r.style.height=se+"px",m.scrollTop=P-le+m.offsetTop}r.style.margin=`${O}px 0`,r.style.minHeight=ye+"px",r.style.maxHeight=K+"px",a==null||a(),requestAnimationFrame(()=>E.current=!0)}},[T,u.trigger,u.valueNode,r,p,m,v,j,u.dir,a]);B(()=>f(),[f]);const[d,b]=n.useState();B(()=>{p&&b(window.getComputedStyle(p).zIndex)},[p]);const S=n.useCallback(R=>{R&&I.current===!0&&(f(),h==null||h(),I.current=!1)},[f,h]);return e.jsx(rn,{scope:t,contentWrapper:r,shouldExpandOnScrollRef:E,onScrollButtonChange:S,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:d},children:e.jsx(_.div,{...i,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});mt.displayName=nn;var sn="SelectPopperPosition",_e=n.forwardRef((o,s)=>{const{__scopeSelect:t,align:a="start",collisionPadding:i=O,...u}=o,l=je(t);return e.jsx(yo,{...l,...u,ref:s,align:a,collisionPadding:i,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_e.displayName=sn;var[rn,ke]=ue(ie,{}),De="SelectViewport",ht=n.forwardRef((o,s)=>{const{__scopeSelect:t,nonce:a,...i}=o,u=oe(De,t),l=ke(De,t),r=H(s,u.onViewportChange),c=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Se.Slot,{scope:t,children:e.jsx(_.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:r,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:A(i.onScroll,p=>{const g=p.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:T}=l;if(T!=null&&T.current&&w){const E=Math.abs(c.current-g.scrollTop);if(E>0){const I=window.innerHeight-O*2,m=parseFloat(w.style.minHeight),v=parseFloat(w.style.height),j=Math.max(m,v);if(j<I){const h=j+E,f=Math.min(I,h),d=h-f;w.style.height=f+"px",w.style.bottom==="0px"&&(g.scrollTop=d>0?d:0,w.style.justifyContent="flex-end")}}}c.current=g.scrollTop})})})]})});ht.displayName=De;var ft="SelectGroup",[an,ln]=ue(ft),cn=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o,i=Le();return e.jsx(an,{scope:t,id:i,children:e.jsx(_.div,{role:"group","aria-labelledby":i,...a,ref:s})})});cn.displayName=ft;var xt="SelectLabel",gt=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o,i=ln(xt,t);return e.jsx(_.div,{id:i.id,...a,ref:s})});gt.displayName=xt;var ve="SelectItem",[dn,vt]=ue(ve),St=n.forwardRef((o,s)=>{const{__scopeSelect:t,value:a,disabled:i=!1,textValue:u,...l}=o,r=te(ve,t),c=oe(ve,t),p=r.value===a,[g,w]=n.useState(u??""),[T,E]=n.useState(!1),I=H(s,h=>{var f;return(f=c.itemRefCallback)==null?void 0:f.call(c,h,a,i)}),m=Le(),v=n.useRef("touch"),j=()=>{i||(r.onValueChange(a),r.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(dn,{scope:t,value:a,disabled:i,textId:m,isSelected:p,onItemTextChange:n.useCallback(h=>{w(f=>f||((h==null?void 0:h.textContent)??"").trim())},[]),children:e.jsx(Se.ItemSlot,{scope:t,value:a,disabled:i,textValue:g,children:e.jsx(_.div,{role:"option","aria-labelledby":m,"data-highlighted":T?"":void 0,"aria-selected":p&&T,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:I,onFocus:A(l.onFocus,()=>E(!0)),onBlur:A(l.onBlur,()=>E(!1)),onClick:A(l.onClick,()=>{v.current!=="mouse"&&j()}),onPointerUp:A(l.onPointerUp,()=>{v.current==="mouse"&&j()}),onPointerDown:A(l.onPointerDown,h=>{v.current=h.pointerType}),onPointerMove:A(l.onPointerMove,h=>{var f;v.current=h.pointerType,i?(f=c.onItemLeave)==null||f.call(c):v.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:A(l.onPointerLeave,h=>{var f;h.currentTarget===document.activeElement&&((f=c.onItemLeave)==null||f.call(c))}),onKeyDown:A(l.onKeyDown,h=>{var d;((d=c.searchRef)==null?void 0:d.current)!==""&&h.key===" "||(Qo.includes(h.key)&&j(),h.key===" "&&h.preventDefault())})})})})});St.displayName=ve;var he="SelectItemText",wt=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:a,style:i,...u}=o,l=te(he,t),r=oe(he,t),c=vt(he,t),p=Zo(he,t),[g,w]=n.useState(null),T=H(s,j=>w(j),c.onItemTextChange,j=>{var h;return(h=r.itemTextRefCallback)==null?void 0:h.call(r,j,c.value,c.disabled)}),E=g==null?void 0:g.textContent,I=n.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:E},c.value),[c.disabled,c.value,E]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=p;return B(()=>(m(I),()=>v(I)),[m,v,I]),e.jsxs(e.Fragment,{children:[e.jsx(_.span,{id:c.textId,...u,ref:T}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ze.createPortal(u.children,l.valueNode):null]})});wt.displayName=he;var jt="SelectItemIndicator",yt=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o;return vt(jt,t).isSelected?e.jsx(_.span,{"aria-hidden":!0,...a,ref:s}):null});yt.displayName=jt;var Me="SelectScrollUpButton",Ct=n.forwardRef((o,s)=>{const t=oe(Me,o.__scopeSelect),a=ke(Me,o.__scopeSelect),[i,u]=n.useState(!1),l=H(s,a.onScrollButtonChange);return B(()=>{if(t.viewport&&t.isPositioned){let r=function(){const p=c.scrollTop>0;u(p)};const c=t.viewport;return r(),c.addEventListener("scroll",r),()=>c.removeEventListener("scroll",r)}},[t.viewport,t.isPositioned]),i?e.jsx(Nt,{...o,ref:l,onAutoScroll:()=>{const{viewport:r,selectedItem:c}=t;r&&c&&(r.scrollTop=r.scrollTop-c.offsetHeight)}}):null});Ct.displayName=Me;var Oe="SelectScrollDownButton",bt=n.forwardRef((o,s)=>{const t=oe(Oe,o.__scopeSelect),a=ke(Oe,o.__scopeSelect),[i,u]=n.useState(!1),l=H(s,a.onScrollButtonChange);return B(()=>{if(t.viewport&&t.isPositioned){let r=function(){const p=c.scrollHeight-c.clientHeight,g=Math.ceil(c.scrollTop)<p;u(g)};const c=t.viewport;return r(),c.addEventListener("scroll",r),()=>c.removeEventListener("scroll",r)}},[t.viewport,t.isPositioned]),i?e.jsx(Nt,{...o,ref:l,onAutoScroll:()=>{const{viewport:r,selectedItem:c}=t;r&&c&&(r.scrollTop=r.scrollTop+c.offsetHeight)}}):null});bt.displayName=Oe;var Nt=n.forwardRef((o,s)=>{const{__scopeSelect:t,onAutoScroll:a,...i}=o,u=oe("SelectScrollButton",t),l=n.useRef(null),r=we(t),c=n.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return n.useEffect(()=>()=>c(),[c]),B(()=>{var g;const p=r().find(w=>w.ref.current===document.activeElement);(g=p==null?void 0:p.ref.current)==null||g.scrollIntoView({block:"nearest"})},[r]),e.jsx(_.div,{"aria-hidden":!0,...i,ref:s,style:{flexShrink:0,...i.style},onPointerDown:A(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(a,50))}),onPointerMove:A(i.onPointerMove,()=>{var p;(p=u.onItemLeave)==null||p.call(u),l.current===null&&(l.current=window.setInterval(a,50))}),onPointerLeave:A(i.onPointerLeave,()=>{c()})})}),un="SelectSeparator",Tt=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o;return e.jsx(_.div,{"aria-hidden":!0,...a,ref:s})});Tt.displayName=un;var Fe="SelectArrow",pn=n.forwardRef((o,s)=>{const{__scopeSelect:t,...a}=o,i=je(t),u=te(Fe,t),l=oe(Fe,t);return u.open&&l.position==="popper"?e.jsx(Co,{...i,...a,ref:s}):null});pn.displayName=Fe;function It(o){return o===""||o===void 0}var Pt=n.forwardRef((o,s)=>{const{value:t,...a}=o,i=n.useRef(null),u=H(s,i),l=Ko(t);return n.useEffect(()=>{const r=i.current,c=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==t&&g){const w=new Event("change",{bubbles:!0});g.call(r,t),r.dispatchEvent(w)}},[l,t]),e.jsx(ro,{asChild:!0,children:e.jsx("select",{...a,ref:u,defaultValue:t})})});Pt.displayName="BubbleSelect";function Et(o){const s=et(o),t=n.useRef(""),a=n.useRef(0),i=n.useCallback(l=>{const r=t.current+l;s(r),function c(p){t.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>c(""),1e3))}(r)},[s]),u=n.useCallback(()=>{t.current="",window.clearTimeout(a.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(a.current),[]),[t,i,u]}function Rt(o,s,t){const i=s.length>1&&Array.from(s).every(p=>p===s[0])?s[0]:s,u=t?o.indexOf(t):-1;let l=mn(o,Math.max(u,0));i.length===1&&(l=l.filter(p=>p!==t));const c=l.find(p=>p.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==t?c:void 0}function mn(o,s){return o.map((t,a)=>o[(s+a)%o.length])}var hn=nt,At=rt,fn=it,xn=lt,gn=ct,_t=dt,vn=ht,Dt=gt,Mt=St,Sn=wt,wn=yt,Ot=Ct,Ft=bt,Lt=Tt;const jn=hn,yn=fn,kt=n.forwardRef(({className:o,children:s,...t},a)=>e.jsxs(At,{ref:a,className:F("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...t,children:[s,e.jsx(xn,{asChild:!0,children:e.jsx(tt,{className:"h-4 w-4 opacity-50"})})]}));kt.displayName=At.displayName;const Vt=n.forwardRef(({className:o,...s},t)=>e.jsx(Ot,{ref:t,className:F("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(zo,{className:"h-4 w-4"})}));Vt.displayName=Ot.displayName;const Bt=n.forwardRef(({className:o,...s},t)=>e.jsx(Ft,{ref:t,className:F("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(tt,{className:"h-4 w-4"})}));Bt.displayName=Ft.displayName;const Ht=n.forwardRef(({className:o,children:s,position:t="popper",...a},i)=>e.jsx(gn,{children:e.jsxs(_t,{ref:i,className:F("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...a,children:[e.jsx(Vt,{}),e.jsx(vn,{className:F("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Bt,{})]})}));Ht.displayName=_t.displayName;const Cn=n.forwardRef(({className:o,...s},t)=>e.jsx(Dt,{ref:t,className:F("py-1.5 pl-8 pr-2 text-sm font-semibold",o),...s}));Cn.displayName=Dt.displayName;const Ut=n.forwardRef(({className:o,children:s,...t},a)=>e.jsxs(Mt,{ref:a,className:F("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(wn,{children:e.jsx(io,{className:"h-4 w-4"})})}),e.jsx(Sn,{children:s})]}));Ut.displayName=Mt.displayName;const bn=n.forwardRef(({className:o,...s},t)=>e.jsx(Lt,{ref:t,className:F("-mx-1 my-1 h-px bg-muted",o),...s}));bn.displayName=Lt.displayName;var Ve="Avatar",[Nn,Vn]=Je(Ve),[Tn,Kt]=Nn(Ve),Wt=n.forwardRef((o,s)=>{const{__scopeAvatar:t,...a}=o,[i,u]=n.useState("idle");return e.jsx(Tn,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:u,children:e.jsx(_.span,{...a,ref:s})})});Wt.displayName=Ve;var qt="AvatarImage",$t=n.forwardRef((o,s)=>{const{__scopeAvatar:t,src:a,onLoadingStatusChange:i=()=>{},...u}=o,l=Kt(qt,t),r=In(a,u.referrerPolicy),c=et(p=>{i(p),l.onImageLoadingStatusChange(p)});return B(()=>{r!=="idle"&&c(r)},[r,c]),r==="loaded"?e.jsx(_.img,{...u,ref:s,src:a}):null});$t.displayName=qt;var zt="AvatarFallback",Gt=n.forwardRef((o,s)=>{const{__scopeAvatar:t,delayMs:a,...i}=o,u=Kt(zt,t),[l,r]=n.useState(a===void 0);return n.useEffect(()=>{if(a!==void 0){const c=window.setTimeout(()=>r(!0),a);return()=>window.clearTimeout(c)}},[a]),l&&u.imageLoadingStatus!=="loaded"?e.jsx(_.span,{...i,ref:s}):null});Gt.displayName=zt;function In(o,s){const[t,a]=n.useState("idle");return B(()=>{if(!o){a("error");return}let i=!0;const u=new window.Image,l=r=>()=>{i&&a(r)};return a("loading"),u.onload=l("loaded"),u.onerror=l("error"),u.src=o,s&&(u.referrerPolicy=s),()=>{i=!1}},[o,s]),t}var Qt=Wt,Yt=$t,Xt=Gt;const Jt=n.forwardRef(({className:o,...s},t)=>e.jsx(Qt,{ref:t,className:F("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",o),...s}));Jt.displayName=Qt.displayName;const Zt=n.forwardRef(({className:o,...s},t)=>e.jsx(Yt,{ref:t,className:F("aspect-square h-full w-full",o),...s}));Zt.displayName=Yt.displayName;const eo=n.forwardRef(({className:o,...s},t)=>e.jsx(Xt,{ref:t,className:F("flex h-full w-full items-center justify-center rounded-full bg-muted",o),...s}));eo.displayName=Xt.displayName;const Xe=V.object({name:V.string().min(3,"Name must be at least 3 characters"),designation:V.string().min(3,"Position must be at least 3 characters"),department:V.string().min(3,"Department must be at least 3 characters"),qualification:V.string().min(3,"Qualification must be at least 3 characters"),image:V.string().url("Must be a valid URL").or(V.string().length(0).optional()),profile:V.string().optional(),email:V.string().email("Must be a valid email").optional(),experience:V.string().optional()}),Pn=["Architecture","Apparel Design","Commercial Practice","Computer Science","Electronics Communication","Electronics Instrumentation","Interior Design","Information Science","Administration","Other"];function Bn(){const{toast:o}=lo(),[s,t]=n.useState(!1),[a,i]=n.useState(!1),[u,l]=n.useState(null),{data:r,isLoading:c}=co({queryKey:["/api/admin/faculty"]}),p=He({resolver:Ue(Xe),defaultValues:{name:"",designation:"",department:"",qualification:"",image:"",profile:"",email:"",experience:""}}),g=He({resolver:Ue(Xe),defaultValues:{name:"",designation:"",department:"",qualification:"",image:"",profile:"",email:"",experience:""}}),w=Pe({mutationFn:async d=>{const b=await fetch("/api/admin/faculty",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!b.ok){const S=await b.json();throw new Error(S.message||"Failed to create faculty")}return await b.json()},onSuccess:()=>{o({title:"Success",description:"Faculty member created successfully"}),t(!1),p.reset(),Ee.invalidateQueries({queryKey:["/api/admin/faculty"]})},onError:d=>{o({title:"Error",description:d.message,variant:"destructive"})}}),T=Pe({mutationFn:async({id:d,data:b})=>{const S=await fetch(`/api/admin/faculty/${d}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!S.ok){const R=await S.json();throw new Error(R.message||"Failed to update faculty")}return await S.json()},onSuccess:()=>{o({title:"Success",description:"Faculty member updated successfully"}),i(!1),l(null),Ee.invalidateQueries({queryKey:["/api/admin/faculty"]})},onError:d=>{o({title:"Error",description:d.message,variant:"destructive"})}}),E=Pe({mutationFn:async d=>{const b=await fetch(`/api/admin/faculty/${d}`,{method:"DELETE"});if(!b.ok){const S=await b.json();throw new Error(S.message||"Failed to delete faculty")}return await b.json()},onSuccess:()=>{o({title:"Success",description:"Faculty member deleted successfully"}),Ee.invalidateQueries({queryKey:["/api/admin/faculty"]})},onError:d=>{o({title:"Error",description:d.message,variant:"destructive"})}}),I=d=>{w.mutate(d)},m=d=>{u&&T.mutate({id:u.id,data:d})},v=d=>{l(d),g.reset({name:d.name,designation:d.designation,department:d.department,qualification:d.qualification,image:d.image||"",profile:d.profile||"",email:d.email||"",experience:d.experience||""}),i(!0)},j=d=>{E.mutate(d)},h=d=>d.split(" ").map(b=>b[0]).join("").toUpperCase().substring(0,2),f=({form:d,formType:b})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Y,{control:d.control,name:"name",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Full Name"}),e.jsx(Z,{children:e.jsx(de,{placeholder:"John Doe",...S})}),e.jsx(ee,{})]})}),e.jsx(Y,{control:d.control,name:"designation",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Position"}),e.jsx(Z,{children:e.jsx(de,{placeholder:"Head of Department",...S})}),e.jsx(ee,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Y,{control:d.control,name:"department",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Department"}),e.jsxs(jn,{onValueChange:S.onChange,defaultValue:S.value,children:[e.jsx(Z,{children:e.jsx(kt,{children:e.jsx(yn,{placeholder:"Select department"})})}),e.jsx(Ht,{children:Pn.map(R=>e.jsx(Ut,{value:R,children:R},R))})]}),e.jsx(ee,{})]})}),e.jsx(Y,{control:d.control,name:"qualification",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Qualification"}),e.jsx(Z,{children:e.jsx(de,{placeholder:"M.Tech, PhD",...S})}),e.jsx(ee,{})]})})]}),e.jsx(Y,{control:d.control,name:"image",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Image URL (Optional)"}),e.jsx(Z,{children:e.jsx(de,{placeholder:"https://example.com/image.jpg",...S})}),e.jsx(Uo,{children:"Link to faculty member's profile photo"}),e.jsx(ee,{})]})}),e.jsx(Y,{control:d.control,name:"profile",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Biography (Optional)"}),e.jsx(Z,{children:e.jsx(qo,{placeholder:"Brief description of faculty member...",...S,className:"resize-none",rows:3})}),e.jsx(ee,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Y,{control:d.control,name:"email",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Email (Optional)"}),e.jsx(Z,{children:e.jsx(de,{placeholder:"example@jsspw.edu.in",...S})}),e.jsx(ee,{})]})}),e.jsx(Y,{control:d.control,name:"experience",render:({field:S})=>e.jsxs(X,{children:[e.jsx(J,{children:"Experience (Optional)"}),e.jsx(Z,{children:e.jsx(de,{placeholder:"10+ years",...S})}),e.jsx(ee,{})]})})]})]});return e.jsxs(To,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Faculty"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage faculty members across all departments"})]}),e.jsxs(Ke,{open:s,onOpenChange:t,children:[e.jsx(Io,{asChild:!0,children:e.jsxs(me,{children:[e.jsx($o,{className:"h-4 w-4 mr-2"}),"Add Faculty"]})}),e.jsxs(We,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qe,{children:[e.jsx($e,{children:"Add New Faculty Member"}),e.jsx(ze,{children:"Create a new faculty profile with their details"})]}),e.jsx(Qe,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(I),className:"space-y-4 py-4",children:[e.jsx(f,{form:p,formType:"create"}),e.jsx(Ge,{children:e.jsx(me,{type:"submit",disabled:w.isPending,children:w.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Faculty"})})]})})]})]})]}),e.jsxs(uo,{children:[e.jsxs(po,{children:[e.jsx(mo,{children:"Faculty List"}),e.jsx(ho,{children:"All faculty members in the system"})]}),e.jsx(fo,{children:c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Re,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(Po,{children:[e.jsxs(Eo,{children:["Total of ",(r==null?void 0:r.length)||0," faculty members"]}),e.jsx(Ro,{children:e.jsxs(Ae,{children:[e.jsx(ce,{children:"Faculty"}),e.jsx(ce,{children:"Position"}),e.jsx(ce,{children:"Department"}),e.jsx(ce,{children:"Qualification"}),e.jsx(ce,{children:"Contact"}),e.jsx(ce,{className:"text-right",children:"Actions"})]})}),e.jsx(Ao,{children:(r==null?void 0:r.length)===0?e.jsx(Ae,{children:e.jsxs(ae,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:[e.jsx(xo,{className:"h-8 w-8 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No faculty members found. Add your first faculty member."})]})}):r==null?void 0:r.map(d=>e.jsxs(Ae,{children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Jt,{children:[e.jsx(Zt,{src:d.image||"",alt:d.name}),e.jsx(eo,{children:h(d.name)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.name}),d.profile&&e.jsx("p",{className:"text-xs text-muted-foreground max-w-[200px] truncate",children:d.profile})]})]})}),e.jsx(ae,{children:d.designation}),e.jsx(ae,{children:d.department}),e.jsx(ae,{children:d.qualification}),e.jsxs(ae,{children:[d.email&&e.jsx("p",{className:"text-sm",children:d.email}),d.experience&&e.jsx("p",{className:"text-sm text-muted-foreground",children:d.experience})]}),e.jsx(ae,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(me,{variant:"outline",size:"icon",onClick:()=>v(d),children:e.jsx(Wo,{className:"h-4 w-4"})}),e.jsxs(_o,{children:[e.jsx(Do,{asChild:!0,children:e.jsx(me,{variant:"outline",size:"icon",className:"text-red-500",children:e.jsx(Mo,{className:"h-4 w-4"})})}),e.jsxs(Oo,{children:[e.jsxs(Fo,{children:[e.jsx(Lo,{children:"Are you sure you want to delete this faculty member?"}),e.jsx(ko,{children:"This action cannot be undone. This will permanently delete the faculty member's profile from the system."})]}),e.jsxs(Vo,{children:[e.jsx(Bo,{children:"Cancel"}),e.jsx(Ho,{onClick:()=>j(d.id),className:"bg-red-500 text-white hover:bg-red-600",children:"Delete"})]})]})]})]})})]},d.id))})]})})]})]}),e.jsx(Ke,{open:a,onOpenChange:i,children:e.jsxs(We,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qe,{children:[e.jsx($e,{children:"Edit Faculty Member"}),e.jsx(ze,{children:"Update the selected faculty member's profile"})]}),e.jsx(Qe,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(m),className:"space-y-4 py-4",children:[e.jsx(f,{form:g,formType:"edit"}),e.jsx(Ge,{children:e.jsx(me,{type:"submit",disabled:T.isPending,children:T.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Faculty"})})]})})]})})]})}export{Bn as default};
